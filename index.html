<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake 2025 – White PRO Edition</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    height: 100vh;
    background: #fff;
    color: #00994d;
    font-family: 'Courier New', monospace;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  h1 {
    font-size: 2rem;
    text-shadow: 0 0 8px #00cc66;
    margin-bottom: 15px;
  }
  canvas {
    background: linear-gradient(180deg, #ffffff, #f5fff5);
    border: 2px solid #00cc66;
    border-radius: 16px;
    box-shadow: 0 0 25px rgba(0, 255, 128, 0.1);
  }
  #scoreDisplay {
    margin-top: 10px;
    font-size: 1rem;
    text-shadow: 0 0 5px #bfffd6;
  }
  button {
    background: #e9fff0;
    color: #00aa55;
    border: 1px solid #00cc66;
    padding: 8px 14px;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
    margin: 5px;
    box-shadow: 0 0 6px rgba(0, 255, 128, 0.15);
    transition: 0.2s;
  }
  button:hover {
    background: #00cc66;
    color: white;
  }
  footer {
    margin-top: 10px;
    font-size: 12px;
    color: #00994d;
    opacity: 0.7;
  }
</style>
</head>
<body>
  <h1>Snake 2025 – Neon PRO</h1>
  <canvas id="game" width="400" height="400"></canvas>
  <div id="scoreDisplay">Score: 0 | High: 0</div>
  <div>
    <button id="pauseBtn">Pause</button>
    <button id="musicBtn">Music: On</button>
    <button id="fxBtn">Mute FX</button>
  </div>
  <footer>Made for Farcaster / Base — deploy on Vercel (static)</footer>

  <audio id="eatSound" src="https://assets.mixkit.co/sfx/download/mixkit-retro-game-notification-212.wav"></audio>
  <audio id="crashSound" src="https://assets.mixkit.co/sfx/download/mixkit-player-losing-or-failing-2042.wav"></audio>
  <audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2023/06/07/audio_b2d7ab99f0.mp3?filename=chiptune-arcade-148811.mp3" loop></audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const eatSound = document.getElementById("eatSound");
const crashSound = document.getElementById("crashSound");
const bgMusic = document.getElementById("bgMusic");
const scoreDisplay = document.getElementById("scoreDisplay");

let box = 20;
let snake = [{x:10*box, y:10*box}];
let direction = null;
let food = randomFood();
let score = 0;
let highScore = localStorage.getItem("snakeHighScore") || 0;
let speed = 120;
let game;
let isPaused = false;
let musicOn = true;
let fxOn = true;

bgMusic.volume = 0.3;
bgMusic.play();

function randomFood() {
  return {
    x: Math.floor(Math.random() * 19 + 1) * box,
    y: Math.floor(Math.random() * 19 + 1) * box
  };
}

function drawCell(x, y, color, alpha=1) {
  ctx.fillStyle = color;
  ctx.globalAlpha = alpha;
  ctx.shadowBlur = 10;
  ctx.shadowColor = color;
  ctx.fillRect(x+1, y+1, box-2, box-2);
  ctx.shadowBlur = 0;
  ctx.globalAlpha = 1;
}

function drawGrid() {
  ctx.strokeStyle = "rgba(0,200,100,0.05)";
  for(let i=0;i<canvas.width;i+=box){
    ctx.beginPath();
    ctx.moveTo(i,0);
    ctx.lineTo(i,canvas.height);
    ctx.stroke();
  }
  for(let i=0;i<canvas.height;i+=box){
    ctx.beginPath();
    ctx.moveTo(0,i);
    ctx.lineTo(canvas.width,i);
    ctx.stroke();
  }
}

function draw() {
  if(isPaused) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawGrid();

  // Draw snake trail
  for(let i = 0; i < snake.length; i++) {
    const alpha = 1 - (i / (snake.length * 1.2));
    drawCell(snake[i].x, snake[i].y, "#00cc66", alpha);
  }

  // Food
  drawCell(food.x, food.y, "#ffbb00");

  // Move
  let snakeX = snake[0].x;
  let snakeY = snake[0].y;
  if(direction === "LEFT") snakeX -= box;
  if(direction === "UP") snakeY -= box;
  if(direction === "RIGHT") snakeX += box;
  if(direction === "DOWN") snakeY += box;

  if(snakeX === food.x && snakeY === food.y) {
    if(fxOn) eatSound.play();
    score++;
    food = randomFood();
    if(speed > 50) speed -= 2;
    clearInterval(game);
    game = setInterval(draw, speed);
  } else {
    snake.pop();
  }

  let newHead = {x: snakeX, y: snakeY};
  if(
    snakeX < 0 || snakeY < 0 ||
    snakeX >= canvas.width || snakeY >= canvas.height ||
    collision(newHead, snake)
  ){
    if(fxOn) crashSound.play();
    clearInterval(game);
    setTimeout(()=>resetGame(), 700);
    return;
  }

  snake.unshift(newHead);

  if(score > highScore){
    highScore = score;
    localStorage.setItem("snakeHighScore", highScore);
  }

  scoreDisplay.innerHTML = `Score: ${score} | High: ${highScore}`;
}

function collision(head, arr){
  return arr.some(p => p.x === head.x && p.y === head.y);
}

document.addEventListener("keydown", e=>{
  if(e.keyCode==37 && direction!=="RIGHT") direction="LEFT";
  else if(e.keyCode==38 && direction!=="DOWN") direction="UP";
  else if(e.keyCode==39 && direction!=="LEFT") direction="RIGHT";
  else if(e.keyCode==40 && direction!=="UP") direction="DOWN";
});

function resetGame(){
  snake = [{x:10*box, y:10*box}];
  direction = null;
  score = 0;
  speed = 120;
  food = randomFood();
  game = setInterval(draw, speed);
}

document.getElementById("pauseBtn").onclick = ()=>{
  isPaused = !isPaused;
  document.getElementById("pauseBtn").innerText = isPaused ? "Resume" : "Pause";
};

document.getElementById("musicBtn").onclick = ()=>{
  musicOn = !musicOn;
  if(musicOn) bgMusic.play(); else bgMusic.pause();
  document.getElementById("musicBtn").innerText = musicOn ? "Music: On" : "Music: Off";
};

document.getElementById("fxBtn").onclick = ()=>{
  fxOn = !fxOn;
  document.getElementById("fxBtn").innerText = fxOn ? "Mute FX" : "FX: Off";
};

game = setInterval(draw, speed);
</script>
</body>
</html>
